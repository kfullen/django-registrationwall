{% extends "base.html" %}

{% load i18n regwall_tags %}


{% block content %}

{% get_regwall_list as regwall_list %}
{% get_regwall_list_read as regwall_list_read %}
{% get_regwall_limit as regwall_limit %}
{% get_regwall_expire as regwall_expire %}

{% if regwall_list|length > regwall_limit %}
<p>You read {{ regwall_limit }} of your {{ regwall_limit }} free article{{ regwall_limit|pluralize }} for {{ regwall_expire }} day{{ regwall_expire|pluralize }}. Log in or register to read unlimited articles.</p>
</div>
{% endif %}

<h1>{% trans 'Log in' %}</h1>

{% if form.errors %}
<div class="alert alert-danger">
    <ul>
        {% for error in form.non_field_errors %}
        <li class="text-danger">{{ error }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<form method="post" action="{% url 'login' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Log in</button>
</form>

<p><a href="{% url 'password_reset' %}">Forgot your password?</a></p>

<p><a href="#">Register for an account.</a></p>

{% if regwall_list|length > regwall_limit %}
<h2>You read these articles</h2>
<ol>
    {% for article in regwall_list_read %}
    <li><a href="{{ article.url }}">{{ article.headline }}</a></li>
    {% endfor %}
</ol>
{% endif %}

{% endblock %}